# Proxmox Configuration for Intel NUC Deployment
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# Proxmox API Configuration
PROXMOX_ENDPOINT=https://nuc.pve.local:8006/api2/json
PROXMOX_USER=root@pam
PROXMOX_TOKEN_ID=your-token-name
PROXMOX_TOKEN_SECRET=your-uuid-secret-key
PROXMOX_INSECURE=true

# Proxmox Node Configuration
PROXMOX_NODE=nuc
PROXMOX_TEMPLATE_NAME=ubuntu-2404-cloud
PROXMOX_TEMPLATE_ID=9000
PROXMOX_CIUSER=ubuntu
PROXMOX_SSH_PUBLIC_KEY_PATH=/Users/yourname/.ssh/nuc-proxmox.pub

# Network Configuration
SSH_ALLOWED_CIDRS=192.168.0.0/24
NETWORK_BRIDGE=vmbr0
NETWORK_IP_ADDRESS=192.168.0.100/24
NETWORK_GATEWAY=192.168.0.1

# Storage Configuration
STORAGE_POOL=local-lvm
DISK_SIZE=50  # Must be >= template disk size (cannot shrink disks)

# Compute Resources
VM_CPU_CORES=2
VM_MEMORY_MB=2048

# Security Settings
ALLOW_PUBLIC_GRPC=false
ALLOW_PUBLIC_DASHBOARD=false

# ============================================================================
# Ansible Configuration (Application Layer)
# ============================================================================

# PostgreSQL Database Configuration
POSTGRES_PASSWORD=changeme-secure-password  # Use a strong password!
POSTGRES_DB=eventstore
POSTGRES_USER=eventstore
POSTGRES_PORT=5432

# Event Store Configuration
EVENT_STORE_GRPC_PORT=50051
EVENT_STORE_BACKEND=postgres
EVENT_STORE_BINARY_URL=https://github.com/your-org/event-store/releases/download/v1.0.0/eventstore-linux-x86_64

# Optional: Logging Configuration
RUST_LOG=info

# Optional: Multiple Environment Support
# For dev/staging/prod on same VM, use different ports:
# DEV:     EVENT_STORE_GRPC_PORT=50051, POSTGRES_PORT=5432
# STAGING: EVENT_STORE_GRPC_PORT=50052, POSTGRES_PORT=5433
# PROD:    EVENT_STORE_GRPC_PORT=50053, POSTGRES_PORT=5434

# Environment Metadata
ENVIRONMENT=local
OWNER=developer
